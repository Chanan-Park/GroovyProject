<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="chanan">
	
	<select id="getTeamDraftCnt" resultType="int" parameterType="com.spring.groovy.common.Pagination" >
		SELECT COUNT(*) FROM VIEW_TEAM_DRAFT
		<if test='searchType != "" and searchWord != "" '>
		WHERE LOWER(${searchType}) LIKE '%'||LOWER(#{searchWord})||'%'
		</if>
	</select>
	
	<select id="getTeamDraftList" resultType="com.spring.groovy.approval.model.DraftVO" parameterType="HashMap" >
		SELECT * 
		FROM ( SELECT A.*, ROWNUM AS RNO
		    FROM ( SELECT *
		            FROM
		            VIEW_TEAM_DRAFT
		            <if test='searchType != "" and searchWord != "" '>
		            WHERE LOWER(${searchType}) LIKE '%'||LOWER(#{searchWord})||'%'
		            </if>
					ORDER BY APPROVAL_DATE ${sortType}
		            )A )
		WHERE RNO BETWEEN #{startRno} AND #{endRno}
	</select>
	
</mapper>